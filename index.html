<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åŸå­é‡ç»„ç³»ç»Ÿ - ç‚¼é’»å®éªŒå®¤</title>
    <!-- æ ¸å¿ƒåº“å¼•å…¥ -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- çƒŸèŠ±ä¸åŠ¨ç”»åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @keyframes quantum-pulse {
            0% { transform: scale(1); opacity: 0.2; }
            50% { transform: scale(1.5); opacity: 0.1; }
            100% { transform: scale(1); opacity: 0.2; }
        }
        .quantum-bg {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: quantum-pulse 3s infinite;
        }
        .custom-scrollbar::-webkit-scrollbar { width: 2px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(59, 130, 246, 0.3); border-radius: 10px; }
        body { 
            background-color: #020617; 
            margin: 0; 
            overflow: hidden; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const App = () => {
            const [day, setDay] = useState(0);
            const [isRefining, setIsRefining] = useState(false);
            const [progress, setProgress] = useState(0);
            const [status, setStatus] = useState("ç³»ç»Ÿå¾…å‘½: å‡†å¤‡å‹åŠ›æµ‹è¯•");
            const [logs, setLogs] = useState(["> ç¯å¢ƒåˆå§‹åŒ–å®Œæˆ", "> ç­‰å¾…é‡å­çº ç¼ æŒ‡ä»¤..."]);
            const [isMuted, setIsMuted] = useState(false);
            
            const audioCtx = useRef(null);
            const logEndRef = useRef(null);

            // è‡ªåŠ¨æ»šåŠ¨æ—¥å¿—
            useEffect(() => {
                logEndRef.current?.scrollIntoView({ behavior: "smooth" });
            }, [logs]);

            const initAudio = () => {
                if (!audioCtx.current) {
                    audioCtx.current = new (window.AudioContext || window.webkitAudioContext)();
                }
            };

            const playSound = (type) => {
                if (isMuted || !audioCtx.current) return;
                const osc = audioCtx.current.createOscillator();
                const gain = audioCtx.current.createGain();
                osc.connect(gain);
                gain.connect(audioCtx.current.destination);

                if (type === 'pressure') {
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(80 + (day * 40), audioCtx.current.currentTime);
                    gain.gain.setValueAtTime(0.05, audioCtx.current.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.current.currentTime + 0.3);
                    osc.start();
                    osc.stop(audioCtx.current.currentTime + 0.3);
                } else if (type === 'success') {
                    const melody = [523.25, 659.25, 783.99, 1046.50, 1318.51];
                    melody.forEach((f, i) => {
                        const o = audioCtx.current.createOscillator();
                        const g = audioCtx.current.createGain();
                        o.connect(g); g.connect(audioCtx.current.destination);
                        o.frequency.setValueAtTime(f, audioCtx.current.currentTime + i * 0.12);
                        g.gain.setValueAtTime(0.08, audioCtx.current.currentTime + i * 0.12);
                        g.gain.exponentialRampToValueAtTime(0.01, audioCtx.current.currentTime + i * 0.12 + 0.6);
                        o.start(audioCtx.current.currentTime + i * 0.12);
                        o.stop(audioCtx.current.currentTime + i * 0.12 + 0.6);
                    });
                }
            };

            const addLog = async (text) => {
                let currentText = "> ";
                setLogs(prev => [...prev, currentText]);
                for (let char of text) {
                    currentText += char;
                    setLogs(prev => [...prev.slice(0, -1), currentText]);
                    await new Promise(r => setTimeout(r, 20));
                }
            };

            const startRefining = async () => {
                if (isRefining) return;
                initAudio();
                setIsRefining(true);
                setDay(0);
                setProgress(0);
                setLogs([]);
                
                await addLog("æ­£åœ¨å»ºç«‹é«˜ç»´ç¢³å‹åœº...");
                
                for (let i = 1; i <= 7; i++) {
                    await new Promise(r => setTimeout(r, 800));
                    setDay(i);
                    setProgress((i / 7) * 100);
                    
                    if (i < 7) {
                        playSound('pressure');
                        await addLog(`ç¬¬ ${i} å‘¨æœŸ: å‹åŠ›å¢è‡³ ${i * 2000} GPa...`);
                        setStatus("åˆ†å­é‡ç»„è¿›è¡Œä¸­...");
                        if (i === 4) await addLog("[æé†’] åˆ«å¿˜äº†ä»Šå¤©çš„é¼“ç‚¹ç»ƒä¹ ã€‚");
                    } else {
                        playSound('success');
                        window.confetti({
                            particleCount: 180,
                            spread: 80,
                            origin: { y: 0.6 },
                            colors: ['#6ee7ff', '#ffffff', '#fb7185']
                        });
                        await addLog("è­¦å‘Šï¼šè§‚æµ‹åˆ°ç»“æ„åç¼©ï¼");
                        await addLog("é‡ç»„æˆåŠŸã€‚â€˜å»ºé½â€™å·²å‡åä¸ºâ€˜æ­†æƒ â€™ã€‚");
                        setStatus("æœ€ç»ˆå½¢æ€ï¼šæ°¸æ’ä¹‹é’»");
                    }
                }
                setIsRefining(false);
            };

            return (
                <div className="min-h-screen bg-[#020617] flex items-center justify-center p-6 relative overflow-hidden text-slate-200">
                    {/* èƒŒæ™¯è£…é¥° */}
                    <div className="absolute inset-0 overflow-hidden pointer-events-none opacity-40">
                        <div className={`absolute -top-1/4 -left-1/4 w-full h-full rounded-full blur-[140px] transition-colors duration-1000 ${day === 7 ? 'bg-blue-500/30' : 'bg-slate-800/20'}`}></div>
                        <div className={`absolute -bottom-1/4 -right-1/4 w-full h-full rounded-full blur-[140px] transition-colors duration-1000 ${day === 7 ? 'bg-pink-500/20' : 'bg-slate-800/10'}`}></div>
                    </div>

                    <div className="relative z-10 w-full max-w-sm bg-slate-900/60 backdrop-blur-3xl border border-white/10 rounded-[3rem] p-8 shadow-2xl">
                        <div className="flex justify-between items-center mb-10">
                            <div className="bg-white/5 px-4 py-1.5 rounded-full border border-white/10 flex items-center gap-2">
                                <div className={`w-1.5 h-1.5 rounded-full ${isRefining ? 'bg-blue-400 animate-pulse' : 'bg-slate-600'}`}></div>
                                <span className="text-[10px] font-mono tracking-widest text-slate-400 uppercase">Quant-X Laboratory</span>
                            </div>
                            <button onClick={() => setIsMuted(!isMuted)} className="text-slate-500 hover:text-white transition-colors">
                                {isMuted ? "ğŸ”‡" : "ğŸ”Š"}
                            </button>
                        </div>

                        <div className="bg-gradient-to-b from-white/5 to-transparent rounded-[2.5rem] py-12 mb-8 border border-white/5 text-center relative overflow-hidden">
                            <div className={`text-8xl mb-6 transition-all duration-1000 transform ${day === 7 ? 'scale-110 drop-shadow-[0_0_25px_rgba(59,130,246,0.5)]' : 'scale-100'}`}>
                                {day === 7 ? 'ğŸ’' : 'âš«'}
                            </div>
                            <h2 className={`text-4xl font-black tracking-tight mb-2 transition-all duration-1000 ${day === 7 ? 'text-transparent bg-clip-text bg-gradient-to-r from-blue-300 via-white to-pink-300' : 'text-white'}`}>
                                {day === 7 ? "æ­†æƒ " : "å»ºé½"}
                            </h2>
                            <p className="text-slate-500 text-[10px] uppercase tracking-[0.3em] font-bold">{status}</p>
                            {day === 7 && <div className="absolute inset-0 bg-blue-400/5 animate-pulse"></div>}
                        </div>

                        <div className="px-1 mb-8">
                            <div className="flex justify-between items-end mb-3">
                                <div className="text-2xl font-mono font-black">{Math.round(progress)}%</div>
                                <div className="text-[10px] text-slate-500 font-bold tracking-widest uppercase">Cycle 0{day}/07</div>
                            </div>
                            <div className="h-1.5 bg-slate-800/50 rounded-full overflow-hidden">
                                <div 
                                    className={`h-full transition-all duration-700 ease-out ${day === 7 ? 'bg-gradient-to-r from-blue-400 to-pink-400' : 'bg-blue-600'}`}
                                    style={{ width: `${progress}%` }}
                                ></div>
                            </div>
                        </div>

                        <div className="bg-black/40 rounded-3xl p-5 mb-8 font-mono text-[10px] h-32 border border-white/5">
                            <div className="overflow-y-auto h-full space-y-1.5 custom-scrollbar">
                                {logs.map((log, i) => (
                                    <div key={i} className={day === 7 ? "text-blue-300" : "text-blue-500/80"}>{log}</div>
                                ))}
                                <div ref={logEndRef} />
                            </div>
                        </div>

                        <button
                            onClick={startRefining}
                            disabled={isRefining}
                            className={`group relative w-full py-6 rounded-[2rem] font-black text-[11px] uppercase tracking-[0.4em] transition-all ${
                                isRefining 
                                ? 'bg-slate-800 text-slate-600 cursor-not-allowed' 
                                : 'bg-white text-slate-950 hover:shadow-xl active:scale-[0.98]'
                            }`}
                        >
                            {isRefining ? "æ­£åœ¨é‡æ„..." : (day === 7 ? "å·²è¾¾æˆæ°¸æ’" : "åˆå§‹åŒ–é‡ç»„ç¨‹åº")}
                        </button>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

